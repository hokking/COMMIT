<%@page import="kr.or.ddit.commit.service.ResumeServiceImple"%>
<%@page import="kr.or.ddit.commit.service.IResumeService"%>
<%@page import="kr.or.ddit.commit.vo.CompanyVO"%>
<%@page import="kr.or.ddit.commit.service.CompanyInfoServiceImpl"%>
<%@page import="kr.or.ddit.commit.service.ICompanyInfoService"%>
<%@page import="kr.or.ddit.commit.vo.MemberVO"%>
<%@page import="kr.or.ddit.commit.vo.RegionVO"%>
<%@page import="kr.or.ddit.commit.service.RegionServiceImpl"%>
<%@page import="kr.or.ddit.commit.service.IRegionService"%>
<%@page import="kr.or.ddit.commit.vo.JobworkVO"%>
<%@page import="java.util.List"%>
<%@page import="kr.or.ddit.commit.service.JobworkServiceImpl"%>
<%@page import="kr.or.ddit.commit.service.IJobworkService"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">              
<script src="../js/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js" ></script>
<script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
<title>Insert title here</title>
<%
	HttpSession session1 = request.getSession();
	MemberVO loginMember = (MemberVO)session1.getAttribute("loginMember");

	ICompanyInfoService cservice = CompanyInfoServiceImpl.getInstance();
	CompanyVO cvo = cservice.companyDetail(loginMember.getMem_id());
	
	
	
	String memid = loginMember.getMem_id();
	Integer num = loginMember.getMem_num();
	IResumeService service3 = ResumeServiceImple.getInstance();
	int rs = service3.selectresume(memid);
	String com = service3.conselect(memid);
	String name = service3.userselect(memid);
%>
<script>
	$(function() {
		
		var IMP = window.IMP;
		IMP.init("imp75988108");
		$('#check_module').on('click', function() {
			IMP.request_pay({
				pg: 'inicis',
				pay_method: 'card',
				merchant_uid: 'commit_' + new Date().getTime(),
				name: 'ì±„ìš©ê³µê³ ë“±ë¡',
// 				amount: parseInt($("#rview option:selected").val()) * 10000,
				amount: 100,
				buyer_email: '<%=cvo.getMem_id()%>',
				buyer_name: '<%=cvo.getCom_name()%>',
				buyer_tel: '<%=cvo.getCom_tel()%>',
				buyer_addr: '<%=cvo.getCom_addr1() + " " + cvo.getCom_addr2()%>'
			}, function(rsp) {
				data = $('#recruitInsert').serializeArray();
		 		data.push({name : 'method', value : rsp.pay_method});
		 		data.push({name : 'amount', value : rsp.paid_amount});
		 		data.push({name : 'id', value : '<%=cvo.getMem_id()%>'});
				console.log(data);
				console.log(rsp);
				if (rsp.success) {
					$.ajax({
						url : '<%=request.getContextPath()%>/recruitInsert.do',
						type : 'post',
						data : data,
						dataType : 'json'
					})
				
					var msg = 'ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.';
// 					msg += 'ê³ ìœ ID : ' + rsp.imp_uid;
// 					msg += 'ìƒì  ê±°ë˜ID : ' + rsp.merchant_uid;
// 					msg += 'ê²°ì œ ê¸ˆì•¡ : ' + rsp.paid_amount;
// 					msg += 'ì¹´ë“œ ìŠ¹ì¸ë²ˆí˜¸ : ' + rsp.apply_num;
// 					msg += 'ê²°ì œ ìŠ¹ì¸ ì‹œê°„ : ' + rsp.paid_at;
// 					msg += 'ê²°ì œ ìˆ˜ë‹¨ : ' + rsp.pay_method;
// 					msg += 'ê²°ì œ ê¸ˆì•¡ : ' + rsp.paid_amount;
					location.href= "<%=request.getContextPath()%>/mypage/mypageMain.jsp";
				} else {
					var msg = 'ê²°ì œì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.';
// 					msg += 'ì—ëŸ¬ë‚´ìš© : ' + rsp.error_msg;
				}
				alert(msg);
			})
		})
	})
</script>
<style type="text/css">
body{
   min-width: 1600px;
    margin: 0;
  padding: 0;
  list-style: none;
}

ul,li {
  margin: 0;
  padding: 0;
  list-style: none;
}

a {
  color: inherit;
  text-decoration: none;
}

header{
   margin-top: 30px;
   height: 80px;
   margin-bottom: 20px;
   width:1600px;
   padding-left: 238px;
}
#nu{
	
	width:800px;
	height: 70px;
	float: left;
}
article{ /* ì•„ë‹ˆì„¹ì…˜ ë¯¸ì¹œëŸ¼ inlineì´ë¼ ì˜†ì— ì•„ë¬´ë„ ì˜¬ ìˆ˜ ì—†ëŠ” ê°œì™•ë”° */
  	margin-top: 50px;
   width:800px;
   margin-left: 400px;
   
}


footer{
 
   margin-top: 1000px;
   width:1600px;
  margin-left: 130px;
}

#logo {
   float: left;
   margin-left: 150px;
   padding-top: 40px;
   width:150px;
}

#logoimg {
   width: 100px;
   height: 30px;
   
}

.nt {
   /* border : 2px solid red; */
   float: left;
   margin-right: 25px;
   margin-left: 25px;
   margin-top: 40px;
   font-size: 15px;
   font-weight: bold;
   letter-spacing: 0;
   -webkit-transition: all .28s ease-in-out;
   transition: all .28s ease-in-out;
}

.nt:hover,
.nt:focus,
.nt:active {
   letter-spacing: 5px;
}

.nt:after,
.nt:before {
   border: 1px solid rgba(255, 255, 255, 0);
   bottom: 0;
   content: " ";
   display: block;
   margin: 0 auto;
   position: relative;
   -webkit-transition: all .28s ease-in-out;
   transition: all .28s ease-in-out;
   width: 0;
}
.nt:hover:after,
.nt:hover:before {
   border-color: #93D8D9;
   -webkit-transition: width 350ms ease-in-out;
   transition: width 350ms ease-in-out;
   width: 80%;
}
.nt:hover:before {
   bottom: auto;
   top: 0;
}



li {
   list-style-type: none;
}



button {

   border: 0px;
   background: white;
   outline: none;
}

#sbar1{

   margin-left: 80px;
   margin-top: 40px;
/*    position: fixed;
  position: absolute;
      top: 30px;
       right: 480px; */
       float: left;
}

#sbar2 {
   width: 150px;
   height: 23px;
   border-radius: 5px;
   border: 2px solid #68C8CA;
   display: inline-block;
   float: left;
   
}

#sbar3{

    background-image: url('<%=request.getContextPath()%>/images/ë‹ë³´ê¸°3.png');
    background-repeat: no-repeat;
    width: 30px;
    height:30px;
    border: 0px;
    cursor:pointer;
    outline: 0;
    background-color: white;
    margin-left: 3px;
    margin-right: 10px;
    float: left;
 
}

#searchimg {
   width: 20px;
   height: 20px;
}

/*ì»¤ìŠ¤í…€*/

.con {
  max-width: 1200px;
}

/*ì‚¬ì´ë“œ ë©”ë‰´ ë°”*/
.side-menu-button {
  display: none;
}
@media (max-width: 2800px) {
  .side-menu-button {
    display: block;
  }
}
/*ì‚¬ì´ë“œ ë©”ë‰´ ë²„íŠ¼*/
.side-menu-button {
  position: absolute;
  top: 20px;
  left: 20px;
  cursor: pointer;
  
}
.side-menu-button .img-box {
  margin-top: 30px;
  width: 20px;
}
/*ì‚¬ì´ë“œ ë©”ë‰´ ë°•ìŠ¤*/
.side-menu-button:hover .side-menu-bar {
  left: 0;
}
.side-menu-bar {
  position: fixed;
  top: 0;
  left: -300px;
  height: 100%;
  width: 300px;
  background-color: white;
  box-sizing: border-box;
  z-index:3;
  transition: left 1s;
}
.side-menu-bar .side-menu-box ul > li {
  position: relative;
  background-color: #dfdfdf;
}
.side-menu-bar .side-menu-box > ul {
  margin-top: 40px;
}
.side-menu-bar .side-menu-box ul > li > a {
  display: block;
  padding: 20px;
  font-weight: bold;
  white-space: nowrap;
}
.side-menu-bar .side-menu-box > ul > li > a {
  padding-left: 40px;
}
.side-menu-bar .side-menu-box ul > li:hover > a {
  color: white;
  background-color:  #93D8D9;
}
.side-menu-bar .side-menu-box ul ul {
  display: none;
  position: absolute;
  top: 0;
  left: 100%;
}
.side-menu-bar .side-menu-box ul > li:hover > ul {
  display: block;
}
.img-box img {
  display: block;
  width: 100%;
}

#con{
background: #white;
	border-radius: 15px;
	border: 2px solid #93D8D9;
	width: 950px;
	padding-left: 100px;
}
#title{
	text-align: center;
	font-size: 25px;
	font-weight: bold;
	color: grey;
}

table{
	margin-top: 50px;
}

#check_module{
	background: #93D8D9;
	border-radius: 5px;
	margin-left: 700px;
	width: 80px;
	height: 40px;
	font-size: 15px;
}

</style>
</head>
<body>

<%
	IJobworkService service = JobworkServiceImpl.getInstance();
	List<JobworkVO> jobList = service.selectAllJobwork();
	
	IRegionService gservice = RegionServiceImpl.getInstance();
	List<RegionVO> regionList = gservice.selectAllRegion();
	
	
	
%>

<header>

<div class="side-menu-button">
  <div class="img-box">
    <img src="<%=request.getContextPath() %>/images/ì‚¬ì´ë“œë°”.png" alt="">
  </div>
  <div class="side-menu-bar">
    <nav class="side-menu-box">
      <ul>
        <li>
          <a href="<%=request.getContextPath() %>/mypage/mypageMain.jsp">MyHome</a>
        </li>
        <li>
          <a href="<%=request.getContextPath() %>/mypage/resume.jsp">ì´ë ¥ì„œ</a>
          <ul>
            <li><a href="<%=request.getContextPath() %>/mypage/resume.jsp">ì´ë ¥ì„œ ê´€ë¦¬</a></li>
            <li><a href="<%=request.getContextPath() %>/mypage/resumeWrite.jsp">ì´ë ¥ì„œ ë“±ë¡</a></li>
          </ul>
        </li>
        <li>
          <a href="<%=request.getContextPath() %>/mypage/statusApply.jsp">ì§€ì›í˜„í™©</a>
         
        </li>
        <li>
          <a href="<%=request.getContextPath() %>/favorite/favoritemain.jsp">ê´€ì‹¬ê³µê³ </a>
         
        </li>
        <li>
          <a href="<%=request.getContextPath() %>/mypage/info.jsp">ê°œì¸ì •ë³´ê´€ë¦¬</a>
       
        </li>
    </nav>
  </div>
</div>



    <div id ="nu">
   <button onclick="location.href='<%=request.getContextPath()%>/board/main2.jsp'" type="button" id="logo" href="main.jsp">
   <img style='cursor:pointer' id="logoimg" alt="ë¡œê³ .png" src="<%=request.getContextPath() %>/images/ì‹¬í”Œë¡œê³ 1.PNG">
   </button>
        <button style='cursor:pointer' onclick="location.href='<%=request.getContextPath() %>/recruit/recruitMain.jsp'" type="button" class="nt">ì±„ìš©ê³µê³ </button>
        <button style='cursor:pointer' onclick="location.href='<%=request.getContextPath() %>/companyinfo/companyinfoMain.jsp'" type="button" class="nt">íšŒì‚¬ì •ë³´</button>
        <button style='cursor:pointer' onclick="location.href='main.jsp'" type="button" class="nt">ì¸ì¬í’€</button>
      <button style='cursor:pointer' onclick="location.href='<%=request.getContextPath() %>/freedom/freedomMain.jsp'" type="button" class="nt">ì»¤ë®¤ë‹ˆí‹°</button>
    </div>
   
 
   <div id="sbar1">
   
   <input id = "sbar2" type = "text" placeholder = "ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
   <input id = "sbar3" type = "submit" style='cursor:pointer' value="">
       <%if(num==1){
	%>
   
      <button id="my3" style='cursor:pointer' type="button" onclick="location.href='<%=request.getContextPath()%>/mypage/mypageMain.jsp'">
      <font size="2"><b><%=name %>ë‹˜</b></font></button>
  
   <%
   }else if(num==2){
	   
   %>
   
   	<button id="my3" style='cursor:pointer' type="button" onclick="location.href='<%=request.getContextPath()%>/mypage/mypageMain2.jsp'">
      <font size="2"><b><%=com %>ë‹˜</b></font></button>
      
   <%
   }
   %>
   
   </div>


</header>


<article>

<h1>ê³µê³ ì‘ì„±</h1>

	<div id="con">
	   
	   <form id="recruitInsert">
	   	
	   		<table>
				<tr>
					
					<td><input id="title" class="intxt" type="text" name="title" placeholder="ê³µê³ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"></td>
				</tr>
				<tr>
    				
    				<td><input class="intxt" type="date" name="sdate"></td>
    			</tr>
				<tr>
    				
    				<td>
    					<select id="rview" name="rview">
    						<option>ê³µê³ ê²Œì‹œì¼</option>
    						<option value="7">7ì¼</option>
    						<option value="14">14ì¼</option>
    					</select>
    				</td>
    			</tr>
		    	<tr>
		    	
		    		<td>ğŸ’»<select id="pst" name="pst">
		    				<option>í¬ì§€ì…˜</option>
<%
				for(JobworkVO jw : jobList) {
%>
    				<option value="<%= jw.getWork_num()%>"><%= jw.getWork_name() %></option>
<%
				}
%>
    					</select>
    				</td>
    			</tr>
    			<tr>
    				
    				<td>ğŸ´â€â˜ ï¸<select name="reg">
    						<option>ì§€ì—­</option>
<%
				for(RegionVO rg : regionList) {
%>
    				<option value="<%= rg.getReg_num() %>"><%= rg.getReg_name() %></option>
<%
				}
%>
    					</select>
    				</td>
    			</tr>
	   			<tr><td colspan="2"><h2>ê¸°ìˆ ìŠ¤íƒ/ì§ë¬´</h2>
  	 			<font size = "4"><b>ê¸°ìˆ ìŠ¤íƒ</b></font><br></td></tr>
		 		<tr><td colspan="2"><textarea name="skill" rows="10" cols="50" placeholder="java , oracle"></textarea></td></tr>
	   			
	   			<tr><td colspan="2"><label><font size = "4"><b>ì£¼ìš”ì—…ë¬´</b></font></label></td></tr>
		 		<tr><td colspan="2"><textarea name="duty" rows="10" cols="50" placeholder="íš¨ìœ¨ì ì¸ ì„œë¹„ìŠ¤ í”„ë¡ íŠ¸ì—”ë“œ ì„¤ê³„, êµ¬ì¶• "></textarea></td></tr>
		 		
      			<tr><td colspan="2"><label><font size = "4"><b>ìš°ëŒ€ì‚¬í•­</b></label><br></td></tr>
    			<tr><td colspan="2"><textarea name="spec" rows="10" cols="50" placeholder="ì‹ ì…/ê²½ë ¥"></textarea></td></tr>
		   		<tr><td colspan="2"><label><font size = "4"><b>ìê²©ìš”ê±´</b></label></td></tr>
		 		<tr><td colspan="2"><textarea name="qlt" rows="10" cols="50" placeholder="í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ê²½ë ¥ 5ë…„ ì´ìƒ, í˜¹ì€ ì´ì— ì¤€í•˜ëŠ” ì‹¤ë¬´ ê²½ë ¥ì„ ê°€ì§€ê³  ê³„ì‹  ë¶„"></textarea></td></tr>
		   		<tr><td colspan="2"><label><font size = "4"><b>ë³µì§€ë°í˜œíƒ</b></label></td></tr>
		 		<tr><td colspan="2"><textarea name="bnf" rows="10" cols="50" placeholder=" ì ì‹¬ ì‹ëŒ€ ì œê³µ"></textarea></td></tr>
		   		<tr><td colspan="2"><label><font size = "4"><b>ëŒ€í‘œì´ë¯¸ì§€</b></label></td></tr>
		 		<tr><td colspan="2"><input type="file" name="img" rows="10" cols="50"></td></tr>
				<tr>
				
				</tr>
			</table><br><br>
   		</form>
		
      <button id="check_module" style='cursor:pointer'>ê²°ì œ</button><br><br>
<!--       <button id="save" style="padding:10px; margin-left:10%">ì €ì¥</button> -->
	</div>
	
	</article>
</body>
</html>